<div class="container mt-4 mb-5">
  <app-loader-spinner *ngIf="loading"></app-loader-spinner>

  <div *ngIf="!loading && product" class="row">
    <div class="col-md-5">
      <img [src]="getImageUrl(product.image)" class="img-fluid rounded shadow" [alt]="product.name">
    </div>
    <div class="col-md-7">
      <h2 class="mb-3">{{ product.name }}</h2>
      <div class="mb-3">
        <span class="badge bg-secondary">{{ product.category?.name }}</span>
        <span class="badge bg-info ms-2" *ngIf="product.brand">{{ product.brand }}</span>
      </div>
      <div class="mb-3">
        <span class="h3 text-success me-2">₹{{ product.price }}</span>
        <span class="text-muted text-decoration-line-through" *ngIf="product.originalPrice">
          ₹{{ product.originalPrice }}
        </span>
        <span class="badge bg-danger ms-2" *ngIf="product.discount > 0">
          {{ product.discount }}% OFF
        </span>
      </div>
      <p class="lead mb-4">{{ product.description }}</p>
      
      <div class="mb-3">
        <strong>Stock:</strong> 
        <span class="text-success" *ngIf="product.stock > 0">
          {{ product.stock }} {{ product.unit }}s available
        </span>
        <span class="text-danger" *ngIf="product.stock === 0">Out of Stock</span>
      </div>

      <div class="mb-3">
        <strong>Rating:</strong>
        <span class="text-warning">
          <i class="fas fa-star"></i> {{ product.rating }}
        </span>
        <span class="text-muted ms-2">({{ product.numReviews }} reviews)</span>
      </div>

      <div class="mb-4">
        <label class="form-label"><strong>Quantity:</strong></label>
        <div class="input-group" style="width: 150px;">
          <button class="btn btn-outline-secondary" type="button" (click)="decreaseQuantity()"
                  [disabled]="quantity <= 1">
            <i class="fas fa-minus"></i>
          </button>
          <input type="number" class="form-control text-center" [(ngModel)]="quantity" 
                 min="1" [max]="product.stock" readonly>
          <button class="btn btn-outline-secondary" type="button" (click)="increaseQuantity()"
                  [disabled]="quantity >= product.stock">
            <i class="fas fa-plus"></i>
          </button>
        </div>
      </div>

      <div class="d-flex gap-2">
        <button class="btn btn-success btn-lg" (click)="addToCart()" 
                [disabled]="product.stock === 0">
          <i class="fas fa-shopping-cart me-2"></i>Add to Cart
        </button>
        <button class="btn btn-outline-secondary btn-lg" routerLink="/home">
          <i class="fas fa-arrow-left me-2"></i>Back to Shopping
        </button>
      </div>
    </div>
  </div>

  <div *ngIf="!loading && !product" class="alert alert-danger">
    Product not found!
  </div>
</div>
